---
import Formulario from "../components/balanceo-nth/formulario";

import MainLayout from "../layout/MainLayout.astro";
import { getAuthData } from "../utils/auth";
import { nameApp } from "../utils/constants";
// Obtener los datos de la sesi칩n y suscripci칩n
const { session, subscription, shouldSignOut } = await getAuthData(
  Astro.request,
);

// Si necesita cerrar sesi칩n, redirigir a logout
if (shouldSignOut) {
  return Astro.redirect("/logout?reason=expired");
}
---

<MainLayout title={nameApp}>
  <div class="flex flex-col py-10 space-y-5">
    <div class="bg-gray-800 rounded-lg">
      <!-- Header -->

      <div class="text-center mb-6">
        <h1
          class="text-2xl lg:text-4xl font-extrabold text-transparent bg-clip-text animated-gradient bg-gradient-to-r from-amber-400 via-orange-700 to-red-600"
        >
          MIKROTIK NTH / GENERADOR DE SCRIPTS NTH
        </h1>
        <p class="text-gray-300">
          Automatiza tu balanceo de carga con este generador de scripts NTH para
          RouterOS. R치pido, eficiente y listo para usar.
        </p>
      </div>

      <!-- fin titulos -->

      <div class="bg-gray-800 rounded-lg mx-4">
        <!-- Contenido Principal -->
        <div class="container mx-auto">
          <!-- Formulario Principal -->
          <Formulario
            client:load
            session={session}
            subscription={subscription}
          />
        </div>
      </div>
    </div>
  </div>
</MainLayout>
